(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,4421,e=>{"use strict";let t;var l=e.i(71645);let i=e=>{let t,l=new Set,i=(e,i)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=i?i:"object"!=typeof s||null===s)?s:Object.assign({},t,s),l.forEach(l=>l(t,e))}},s=()=>t,a={setState:i,getState:s,getInitialState:()=>r,subscribe:e=>(l.add(e),()=>l.delete(e))},r=t=e(i,s,a);return a},s=e=>{let t=e?i(e):i,s=e=>(function(e,t=e=>e){let i=l.default.useSyncExternalStore(e.subscribe,l.default.useCallback(()=>t(e.getState()),[e,t]),l.default.useCallback(()=>t(e.getInitialState()),[e,t]));return l.default.useDebugValue(i),i})(t,e);return Object.assign(s,t),s};async function a(){let e=await fetch(`${window.__NEXT_DATA__?.assetPrefix||""}/products.json`,{cache:"no-store"});if(!e.ok)throw Error("Failed to load products");return e.json()}async function r(e){let t=(await a()).products.find(t=>t.id===e);if(!t)throw Error("Mot found");return t}let n=(t=(e,t)=>({items:{},order:[],filter:"all",loading:!1,page:1,perPage:9,search:"",setFilter(t){e({filter:t,page:1})},setPage(t){e({page:Math.max(1,Math.floor(t))})},setPerPage(t){e({perPage:Math.max(1,Math.floor(t)),page:1})},setSearch(t){e({search:t.trim(),page:1})},async loadList(){e({loading:!0,error:void 0});try{let l=await a(),i={...t().items},s=[];for(let e of l.products){let t=e.id;s.push(t),i[t]={id:t,title:e.title,description:e.description,price:e.price,category:e.category,thumbnail:e.thumbnail,liked:i[t]?.liked??!1,deleted:i[t]?.deleted??!1,local:i[t]?.local??!1}}let r=Object.values(i).filter(e=>e.local&&!e.deleted).map(e=>e.id);e({items:i,order:[...r,...s],loading:!1})}catch(t){e({error:t instanceof Error?t.message:"Load error",loading:!1})}},async loadOne(l){let i=t().items[l];if(i&&!i.deleted)return i;let s=await r(l),a={id:s.id,title:s.title,description:s.description,price:s.price,category:s.category,thumbnail:s.thumbnail,liked:!1,deleted:!1,local:s.local??!1};return e({items:{...t().items,[l]:a}}),a},toggleLike(l){let i={...t().items},s=i[l];s&&(i[l]={...s,liked:!s.liked},e({items:i}))},remove(l){let i={...t().items},s=i[l];s&&(i[l]={...s,deleted:!0,liked:!1},e({items:i,order:t().order.filter(e=>e!==l)}))},createLocal(l){let i=Math.floor(1e5+9e5*Math.random()),s={...l,id:i,local:!0,liked:!1,deleted:!1};return e({items:{...t().items,[i]:s},order:[i,...t().order]}),i}}))?s(t):s;e.s(["useProducts",0,n],4421)},18566,(e,t,l)=>{t.exports=e.r(76562)},63570,e=>{"use strict";var t=e.i(43476),l=e.i(71645),i=e.i(4421),s=e.i(18566);function a(e){return e.toLowerCase()}function r(){let{order:e,items:s,filter:r,setFilter:c,loadList:d,loading:o,error:u,page:p,perPage:h,setPage:m,setPerPage:g,search:f,setSearch:x}=(0,i.useProducts)(),[j,b]=(0,l.useState)(f);(0,l.useEffect)(()=>b(f),[f]),(0,l.useEffect)(()=>{let e=setTimeout(()=>x(j),150);return()=>clearTimeout(e)},[j,x]),(0,l.useEffect)(()=>{d()},[d]);let v=(0,l.useMemo)(()=>{let t=e.map(e=>s[e]).filter(Boolean).filter(e=>!e.deleted);return"liked"===r?t.filter(e=>e.liked):t},[e,s,r]),y=(0,l.useMemo)(()=>{let e=a(f);return e?v.filter(t=>{let l=a(t.title),i=a(t.description),s=a(t.category);return l.includes(e)||i.includes(e)||s.includes(e)}):v},[v,f]),k=y.length,N=Math.max(1,Math.ceil(k/h)),w=Math.min(p,N),C=(w-1)*h,P=y.slice(C,C+h);return(0,l.useEffect)(()=>{p!==w&&m(w)},[w,p,m]),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"controls",style:{marginBottom:12,display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[(0,t.jsx)("input",{placeholder:"ÐŸÐ¾Ð¸ÑÐº Ð¿Ð¾ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸ÑŽ, Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸ÑŽ, ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸â€¦",value:j,onChange:e=>b(e.target.value),style:{flex:"1 1 280px",padding:"8px 10px",border:"1px solid #ddd",borderRadius:8}}),(0,t.jsxs)("select",{value:r,onChange:e=>c(e.target.value),children:[(0,t.jsx)("option",{value:"all",children:"Ð’ÑÐµ"}),(0,t.jsx)("option",{value:"liked",children:"Ð˜Ð·Ð±Ñ€Ð°Ð½Ð½Ð¾Ðµ"})]}),(0,t.jsx)("span",{style:{opacity:.7},children:"ÐÐ° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ:"}),(0,t.jsxs)("select",{value:h,onChange:e=>g(Number(e.target.value)),children:[(0,t.jsx)("option",{value:6,children:"6"}),(0,t.jsx)("option",{value:9,children:"9"}),(0,t.jsx)("option",{value:12,children:"12"}),(0,t.jsx)("option",{value:18,children:"18"})]}),(0,t.jsxs)("span",{style:{marginLeft:"auto",opacity:.7},children:["Ð’ÑÐµÐ³Ð¾: ",k," â€¢ Ð¡Ñ‚Ñ€. ",w,"/",N]})]}),o&&(0,t.jsx)("div",{className:"badge",children:"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°â€¦"}),u&&(0,t.jsxs)("div",{className:"badge",style:{background:"#ffe8e8"},children:["ÐžÑˆÐ¸Ð±ÐºÐ°: ",u]}),!o&&!u&&0===P.length&&(0,t.jsx)("div",{className:"empty",children:"ÐÐ¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾"}),(0,t.jsx)("div",{className:"grid",children:P.map(e=>(0,t.jsx)(n,{id:e.id},e.id))}),N>1&&(0,t.jsxs)("div",{className:"pagination",style:{display:"flex",gap:8,justifyContent:"center",marginTop:16},children:[(0,t.jsx)("button",{className:"icon-btn",disabled:w<=1,onClick:()=>m(w-1),children:"â† ÐÐ°Ð·Ð°Ð´"}),(0,t.jsxs)("span",{className:"badge",children:["Ð¡Ñ‚Ñ€. ",w," Ð¸Ð· ",N]}),(0,t.jsx)("button",{className:"icon-btn",disabled:w>=N,onClick:()=>m(w+1),children:"Ð’Ð¿ÐµÑ€Ñ‘Ð´ â†’"})]})]})}function n({id:e}){let l=(0,i.useProducts)(t=>t.items[e]),a=(0,i.useProducts)(e=>e.toggleLike),r=(0,i.useProducts)(e=>e.remove),n=(0,s.useRouter)();return(0,t.jsxs)("div",{className:"card",role:"button",onClick:t=>{t.target.closest(".icon-btn")||n.push(`/product?id=${e}`)},children:[(0,t.jsx)("img",{src:l.thumbnail,alt:l.title}),(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("strong",{className:"line-clamp",style:{maxWidth:"70%"},children:l.title}),(0,t.jsxs)("span",{className:"badge",children:["$",l.price]})]}),(0,t.jsx)("div",{className:"line-clamp",children:l.description}),(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("span",{className:"badge",children:l.category}),(0,t.jsxs)("div",{className:"row",style:{gap:4},children:[(0,t.jsx)("button",{className:`icon-btn like ${l.liked?"active":""}`,title:"Like",onClick:()=>a(l.id),children:"â¤"}),(0,t.jsx)("button",{className:"icon-btn",title:"Delete",onClick:e=>{e.stopPropagation(),r(l.id)},children:"ðŸ—‘"})]})]})]})]})}e.s(["default",()=>r])}]);