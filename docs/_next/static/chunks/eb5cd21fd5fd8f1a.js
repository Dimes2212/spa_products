(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,r)=>{t.exports=e.r(76562)},4421,e=>{"use strict";let t;var r=e.i(71645);let i=e=>{let t,r=new Set,i=(e,i)=>{let l="function"==typeof e?e(t):e;if(!Object.is(l,t)){let e=t;t=(null!=i?i:"object"!=typeof l||null===l)?l:Object.assign({},t,l),r.forEach(r=>r(t,e))}},l=()=>t,a={setState:i,getState:l,getInitialState:()=>s,subscribe:e=>(r.add(e),()=>r.delete(e))},s=t=e(i,l,a);return a},l=e=>{let t=e?i(e):i,l=e=>(function(e,t=e=>e){let i=r.default.useSyncExternalStore(e.subscribe,r.default.useCallback(()=>t(e.getState()),[e,t]),r.default.useCallback(()=>t(e.getInitialState()),[e,t]));return r.default.useDebugValue(i),i})(t,e);return Object.assign(l,t),l};async function a(){let e=await fetch(`${window.__NEXT_DATA__?.assetPrefix||""}/products.json`,{cache:"no-store"});if(!e.ok)throw Error("Failed to load products");return e.json()}async function s(e){let t=(await a()).products.find(t=>t.id===e);if(!t)throw Error("Mot found");return t}let d=(t=(e,t)=>({items:{},order:[],filter:"all",loading:!1,page:1,perPage:9,search:"",setFilter(t){e({filter:t,page:1})},setPage(t){e({page:Math.max(1,Math.floor(t))})},setPerPage(t){e({perPage:Math.max(1,Math.floor(t)),page:1})},setSearch(t){e({search:t.trim(),page:1})},async loadList(){e({loading:!0,error:void 0});try{let r=await a(),i={...t().items},l=[];for(let e of r.products){let t=e.id;l.push(t),i[t]={id:t,title:e.title,description:e.description,price:e.price,category:e.category,thumbnail:e.thumbnail,liked:i[t]?.liked??!1,deleted:i[t]?.deleted??!1,local:i[t]?.local??!1}}let s=Object.values(i).filter(e=>e.local&&!e.deleted).map(e=>e.id);e({items:i,order:[...s,...l],loading:!1})}catch(t){e({error:t instanceof Error?t.message:"Load error",loading:!1})}},async loadOne(r){let i=t().items[r];if(i&&!i.deleted)return i;let l=await s(r),a={id:l.id,title:l.title,description:l.description,price:l.price,category:l.category,thumbnail:l.thumbnail,liked:!1,deleted:!1,local:l.local??!1};return e({items:{...t().items,[r]:a}}),a},toggleLike(r){let i={...t().items},l=i[r];l&&(i[r]={...l,liked:!l.liked},e({items:i}))},remove(r){let i={...t().items},l=i[r];l&&(i[r]={...l,deleted:!0,liked:!1},e({items:i,order:t().order.filter(e=>e!==r)}))},createLocal(r){let i=Math.floor(1e5+9e5*Math.random()),l={...r,id:i,local:!0,liked:!1,deleted:!1};return e({items:{...t().items,[i]:l},order:[i,...t().order]}),i}}))?l(t):l;e.s(["useProducts",0,d],4421)},4499,e=>{"use strict";var t=e.i(43476),r=e.i(71645),i=e.i(18566),l=e.i(22016),a=e.i(4421);function s(){let e=(0,i.useSearchParams)().get("id"),s=(0,r.useMemo)(()=>e?Number(e):NaN,[e]),d=(0,a.useProducts)(e=>Number.isFinite(s)?e.items[s]:void 0),o=(0,a.useProducts)(e=>e.loadOne),[c,n]=(0,r.useState)(d??null),[u,h]=(0,r.useState)(null);return((0,r.useEffect)(()=>{Number.isFinite(s)?d||(async()=>{try{let e=await o(s);n(e)}catch{h("Товар не найден")}})():h("Некорректный идентификатор товара")},[s,d,o]),u)?(0,t.jsxs)("div",{children:[(0,t.jsx)(l.default,{href:"/products",children:"← Назад к списку"}),(0,t.jsx)("p",{style:{marginTop:12},children:u})]}):c?(0,t.jsxs)("div",{children:[(0,t.jsx)(l.default,{href:"/products",children:"← Назад к списку"}),(0,t.jsx)("h2",{style:{marginTop:12},children:c.title}),(0,t.jsx)("img",{src:c.thumbnail,alt:c.title,style:{width:"100%",maxWidth:720,borderRadius:12,margin:"12px 0"}}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Цена:"})," $",c.price]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Категория:"})," ",c.category]}),(0,t.jsx)("p",{style:{whiteSpace:"pre-wrap"},children:c.description})]}):(0,t.jsxs)("div",{children:[(0,t.jsx)(l.default,{href:"/products",children:"← Назад к списку"}),(0,t.jsx)("p",{style:{marginTop:12},children:"Загрузка…"})]})}e.s(["default",()=>s])}]);