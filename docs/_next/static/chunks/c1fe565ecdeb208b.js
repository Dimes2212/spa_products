(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,4421,e=>{"use strict";let t;var l=e.i(71645);let i=e=>{let t,l=new Set,i=(e,i)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=i?i:"object"!=typeof s||null===s)?s:Object.assign({},t,s),l.forEach(l=>l(t,e))}},s=()=>t,r={setState:i,getState:s,getInitialState:()=>a,subscribe:e=>(l.add(e),()=>l.delete(e))},a=t=e(i,s,r);return r},s=e=>{let t=e?i(e):i,s=e=>(function(e,t=e=>e){let i=l.default.useSyncExternalStore(e.subscribe,l.default.useCallback(()=>t(e.getState()),[e,t]),l.default.useCallback(()=>t(e.getInitialState()),[e,t]));return l.default.useDebugValue(i),i})(t,e);return Object.assign(s,t),s};async function r(){let e=await fetch(`${window.__NEXT_DATA__?.assetPrefix||""}/products.json`,{cache:"no-store"});if(!e.ok)throw Error("Failed to load products");return e.json()}async function a(e){let t=(await r()).products.find(t=>t.id===e);if(!t)throw Error("Mot found");return t}let d=(t=(e,t)=>({items:{},order:[],filter:"all",loading:!1,setFilter(t){e({filter:t})},async loadList(){e({loading:!0,error:void 0});try{let l=await r(),i={...t().items},s=[];for(let e of l.products){let t=e.id;s.push(t),i[t]={id:t,title:e.title,description:e.description,price:e.price,category:e.category,thumbnail:e.thumbnail,liked:i[t]?.liked??!1,deleted:i[t]?.deleted??!1,local:i[t]?.local??!1}}let a=Object.values(i).filter(e=>e.local&&!e.deleted).map(e=>e.id);e({items:i,order:[...a,...s],loading:!1})}catch(t){e({error:t instanceof Error?t.message:"Load error",loading:!1})}},async loadOne(l){let i=t().items[l];if(i&&!i.deleted)return i;let s=await a(l),r={id:s.id,title:s.title,description:s.description,price:s.price,category:s.category,thumbnail:s.thumbnail,liked:!1,deleted:!1,local:s.local??!1};return e({items:{...t().items,[l]:r}}),r},toggleLike(l){let i={...t().items},s=i[l];s&&(i[l]={...s,liked:!s.liked},e({items:i}))},remove(l){let i={...t().items},s=i[l];s&&(i[l]={...s,deleted:!0,liked:!1},e({items:i,order:t().order.filter(e=>e!==l)}))},createLocal(l){let i=Math.floor(1e5+9e5*Math.random()),s={...l,id:i,local:!0,liked:!1,deleted:!1};return e({items:{...t().items,[i]:s},order:[i,...t().order]}),i}}))?s(t):s;e.s(["useProducts",0,d],4421)},18566,(e,t,l)=>{t.exports=e.r(76562)},63570,e=>{"use strict";var t=e.i(43476),l=e.i(71645),i=e.i(4421),s=e.i(18566);function r(){let{order:e,items:s,filter:r,setFilter:d,loadList:o,loading:c,error:n}=(0,i.useProducts)();(0,l.useEffect)(()=>{o()},[o]);let u=(0,l.useMemo)(()=>{let t=e.map(e=>s[e]).filter(Boolean).filter(e=>!e.deleted);return"liked"===r?t.filter(e=>e.liked):t},[e,s,r]);return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"controls",style:{marginBottom:12,display:"flex",gap:8},children:(0,t.jsxs)("select",{value:r,onChange:e=>d(e.target.value),children:[(0,t.jsx)("option",{value:"all",children:"Ð’ÑÐµ"}),(0,t.jsx)("option",{value:"liked",children:"Ð˜Ð·Ð±Ñ€Ð°Ð½Ð½Ð¾Ðµ"})]})}),c&&(0,t.jsx)("div",{className:"badge",children:"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°â€¦"}),n&&(0,t.jsxs)("div",{className:"badge",style:{background:"#ffe8e8"},children:["ÐžÑˆÐ¸Ð±ÐºÐ°: ",n]}),!c&&!n&&0===u.length&&(0,t.jsx)("div",{className:"empty",children:"ÐÐ¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾"}),(0,t.jsx)("div",{className:"grid",children:u.map(e=>(0,t.jsx)(a,{id:e.id},e.id))})]})}function a({id:e}){let l=(0,i.useProducts)(t=>t.items[e]),r=(0,i.useProducts)(e=>e.toggleLike),a=(0,i.useProducts)(e=>e.remove),d=(0,s.useRouter)();return(0,t.jsxs)("div",{className:"card",role:"button",onClick:t=>{t.target.closest(".icon-btn")||d.push(`/product?id=${e}`)},children:[(0,t.jsx)("img",{src:l.thumbnail,alt:l.title}),(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("strong",{className:"line-clamp",style:{maxWidth:"70%"},children:l.title}),(0,t.jsxs)("span",{className:"badge",children:["$",l.price]})]}),(0,t.jsx)("div",{className:"line-clamp",children:l.description}),(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("span",{className:"badge",children:l.category}),(0,t.jsxs)("div",{className:"row",style:{gap:4},children:[(0,t.jsx)("button",{className:`icon-btn like ${l.liked?"active":""}`,title:"Like",onClick:()=>r(l.id),children:"â¤"}),(0,t.jsx)("button",{className:"icon-btn",title:"Delete",onClick:e=>{e.stopPropagation(),a(l.id)},children:"ðŸ—‘"})]})]})]})]})}e.s(["default",()=>r])}]);