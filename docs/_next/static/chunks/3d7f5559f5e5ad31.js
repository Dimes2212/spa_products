(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,4421,e=>{"use strict";let t;var l=e.i(71645);let r=e=>{let t,l=new Set,r=(e,r)=>{let i="function"==typeof e?e(t):e;if(!Object.is(i,t)){let e=t;t=(null!=r?r:"object"!=typeof i||null===i)?i:Object.assign({},t,i),l.forEach(l=>l(t,e))}},i=()=>t,a={setState:r,getState:i,getInitialState:()=>o,subscribe:e=>(l.add(e),()=>l.delete(e))},o=t=e(r,i,a);return a},i=e=>{let t=e?r(e):r,i=e=>(function(e,t=e=>e){let r=l.default.useSyncExternalStore(e.subscribe,l.default.useCallback(()=>t(e.getState()),[e,t]),l.default.useCallback(()=>t(e.getInitialState()),[e,t]));return l.default.useDebugValue(r),r})(t,e);return Object.assign(i,t),i};async function a(){let e=await fetch(`${window.__NEXT_DATA__?.assetPrefix||""}/products.json`,{cache:"no-store"});if(!e.ok)throw Error("Failed to load products");return e.json()}async function o(e){let t=(await a()).products.find(t=>t.id===e);if(!t)throw Error("Mot found");return t}let s=(t=(e,t)=>({items:{},order:[],filter:"all",loading:!1,setFilter(t){e({filter:t})},async loadList(){e({loading:!0,error:void 0});try{let l=await a(),r={...t().items},i=[];for(let e of l.products){let t=e.id;i.push(t),r[t]={id:t,title:e.title,description:e.description,price:e.price,category:e.category,thumbnail:e.thumbnail,liked:r[t]?.liked??!1,deleted:r[t]?.deleted??!1,local:r[t]?.local??!1}}let o=Object.values(r).filter(e=>e.local&&!e.deleted).map(e=>e.id);e({items:r,order:[...o,...i],loading:!1})}catch(t){e({error:t instanceof Error?t.message:"Load error",loading:!1})}},async loadOne(l){let r=t().items[l];if(r&&!r.deleted)return r;let i=await o(l),a={id:i.id,title:i.title,description:i.description,price:i.price,category:i.category,thumbnail:i.thumbnail,liked:!1,deleted:!1,local:i.local??!1};return e({items:{...t().items,[l]:a}}),a},toggleLike(l){let r={...t().items},i=r[l];i&&(r[l]={...i,liked:!i.liked},e({items:r}))},remove(l){let r={...t().items},i=r[l];i&&(r[l]={...i,deleted:!0,liked:!1},e({items:r,order:t().order.filter(e=>e!==l)}))},createLocal(l){let r=Math.floor(1e5+9e5*Math.random()),i={...l,id:r,local:!0,liked:!1,deleted:!1};return e({items:{...t().items,[r]:i},order:[r,...t().order]}),r}}))?i(t):i;e.s(["useProducts",0,s],4421)},18566,(e,t,l)=>{t.exports=e.r(76562)},98915,e=>{"use strict";var t=e.i(43476),l=e.i(71645),r=e.i(4421),i=e.i(18566),a=e.i(22016);function o(){let e=(0,r.useProducts)(e=>e.createLocal),o=(0,i.useRouter)(),[s,d]=(0,l.useState)(""),[n,u]=(0,l.useState)(""),[c,p]=(0,l.useState)("LEGO LOTR"),[m,f]=(0,l.useState)(""),[h,g]=(0,l.useState)(""),[b,y]=(0,l.useState)(null);return(0,t.jsxs)("div",{style:{maxWidth:560},children:[(0,t.jsx)(a.default,{href:"/products",children:"← Назад к списку"}),(0,t.jsx)("h2",{style:{marginTop:12},children:"Добавить сет"}),b&&(0,t.jsx)("div",{className:"badge",style:{background:"#ffe8e8",margin:"8px 0"},children:b}),(0,t.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),y(null),!s.trim()||!h.trim()||!c.trim()||!m.trim()||""===n||0>Number(n))return void y("Заполните все поля корректно (цена ≥ 0).");let l=e({title:s.trim(),description:h.trim(),price:Number(n),category:c.trim(),thumbnail:m.trim()});o.push(`/product?id=${l}`)},style:{display:"flex",flexDirection:"column",gap:10,marginTop:8},children:[(0,t.jsx)("input",{placeholder:"Название",value:s,onChange:e=>d(e.target.value)}),(0,t.jsx)("input",{placeholder:"Цена",inputMode:"decimal",value:n,onChange:e=>u(""===e.target.value?"":Number(e.target.value))}),(0,t.jsx)("input",{placeholder:"Категория",value:c,onChange:e=>p(e.target.value)}),(0,t.jsx)("input",{placeholder:"Ссылка на изображение",value:m,onChange:e=>f(e.target.value)}),(0,t.jsx)("textarea",{placeholder:"Описание",value:h,onChange:e=>g(e.target.value),rows:5}),(0,t.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,t.jsx)("button",{type:"submit",className:"primary",children:"Создать"}),(0,t.jsx)(a.default,{href:"/products",children:(0,t.jsx)("button",{type:"button",children:"Отмена"})})]})]})]})}e.s(["default",()=>o])}]);