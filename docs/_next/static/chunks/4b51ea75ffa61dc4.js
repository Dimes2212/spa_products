(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,4421,e=>{"use strict";let t;var r=e.i(71645);let l=e=>{let t,r=new Set,l=(e,l)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=l?l:"object"!=typeof a||null===a)?a:Object.assign({},t,a),r.forEach(r=>r(t,e))}},a=()=>t,i={setState:l,getState:a,getInitialState:()=>o,subscribe:e=>(r.add(e),()=>r.delete(e))},o=t=e(l,a,i);return i},a=e=>{let t=e?l(e):l,a=e=>(function(e,t=e=>e){let l=r.default.useSyncExternalStore(e.subscribe,r.default.useCallback(()=>t(e.getState()),[e,t]),r.default.useCallback(()=>t(e.getInitialState()),[e,t]));return r.default.useDebugValue(l),l})(t,e);return Object.assign(a,t),a};async function i(){let e=await fetch(`${window.__NEXT_DATA__?.assetPrefix||""}/products.json`,{cache:"no-store"});if(!e.ok)throw Error("Failed to load products");return e.json()}async function o(e){let t=(await i()).products.find(t=>t.id===e);if(!t)throw Error("Mot found");return t}let s=(t=(e,t)=>({items:{},order:[],filter:"all",loading:!1,page:1,perPage:9,search:"",setFilter(t){e({filter:t,page:1})},setPage(t){e({page:Math.max(1,Math.floor(t))})},setPerPage(t){e({perPage:Math.max(1,Math.floor(t)),page:1})},setSearch(t){e({search:t.trim(),page:1})},async loadList(){e({loading:!0,error:void 0});try{let r=await i(),l={...t().items},a=[];for(let e of r.products){let t=e.id;a.push(t),l[t]={id:t,title:e.title,description:e.description,price:e.price,category:e.category,thumbnail:e.thumbnail,liked:l[t]?.liked??!1,deleted:l[t]?.deleted??!1,local:l[t]?.local??!1}}let o=Object.values(l).filter(e=>e.local&&!e.deleted).map(e=>e.id);e({items:l,order:[...o,...a],loading:!1})}catch(t){e({error:t instanceof Error?t.message:"Load error",loading:!1})}},async loadOne(r){let l=t().items[r];if(l&&!l.deleted)return l;let a=await o(r),i={id:a.id,title:a.title,description:a.description,price:a.price,category:a.category,thumbnail:a.thumbnail,liked:!1,deleted:!1,local:a.local??!1};return e({items:{...t().items,[r]:i}}),i},toggleLike(r){let l={...t().items},a=l[r];a&&(l[r]={...a,liked:!a.liked},e({items:l}))},remove(r){let l={...t().items},a=l[r];a&&(l[r]={...a,deleted:!0,liked:!1},e({items:l,order:t().order.filter(e=>e!==r)}))},createLocal(r){let l=Math.floor(1e5+9e5*Math.random()),a={...r,id:l,local:!0,liked:!1,deleted:!1};return e({items:{...t().items,[l]:a},order:[l,...t().order]}),l}}))?a(t):a;e.s(["useProducts",0,s],4421)},18566,(e,t,r)=>{t.exports=e.r(76562)},98915,e=>{"use strict";var t=e.i(43476),r=e.i(71645),l=e.i(4421),a=e.i(18566),i=e.i(22016);function o(){let e=(0,l.useProducts)(e=>e.createLocal),o=(0,a.useRouter)(),[s,d]=(0,r.useState)(""),[n,u]=(0,r.useState)(""),[c,p]=(0,r.useState)("LEGO LOTR"),[h,g]=(0,r.useState)(""),[m,f]=(0,r.useState)(""),[b,x]=(0,r.useState)(null);return(0,t.jsxs)("div",{style:{maxWidth:560},children:[(0,t.jsx)(i.default,{href:"/products",children:"← Назад к списку"}),(0,t.jsx)("h2",{style:{marginTop:12},children:"Добавить сет"}),b&&(0,t.jsx)("div",{className:"badge",style:{background:"#ffe8e8",margin:"8px 0"},children:b}),(0,t.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),x(null),!s.trim()||!m.trim()||!c.trim()||!h.trim()||""===n||0>Number(n))return void x("Заполните все поля корректно (цена ≥ 0).");let r=e({title:s.trim(),description:m.trim(),price:Number(n),category:c.trim(),thumbnail:h.trim()});o.push(`/product?id=${r}`)},style:{display:"flex",flexDirection:"column",gap:10,marginTop:8},children:[(0,t.jsx)("input",{placeholder:"Название",value:s,onChange:e=>d(e.target.value)}),(0,t.jsx)("input",{placeholder:"Цена",inputMode:"decimal",value:n,onChange:e=>u(""===e.target.value?"":Number(e.target.value))}),(0,t.jsx)("input",{placeholder:"Категория",value:c,onChange:e=>p(e.target.value)}),(0,t.jsx)("input",{placeholder:"Ссылка на изображение",value:h,onChange:e=>g(e.target.value)}),(0,t.jsx)("textarea",{placeholder:"Описание",value:m,onChange:e=>f(e.target.value),rows:5}),(0,t.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,t.jsx)("button",{type:"submit",className:"primary",children:"Создать"}),(0,t.jsx)(i.default,{href:"/products",children:(0,t.jsx)("button",{type:"button",children:"Отмена"})})]})]})]})}e.s(["default",()=>o])}]);